{"ast":null,"code":"import _slicedToArray from \"/mnt/c/Users/dcmcc/Desktop/dan-mccarthy265.github.io/simple_web3_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useReducer } from 'react';\nimport { useDebounce } from '../../../hooks';\nimport { useReadonlyNetworks } from '../../network';\nimport { BlockNumbersContext } from './context';\nimport { blockNumberReducer } from '../common/reducer';\nimport { subscribeToNewBlock } from '../common/subscribeToNewBlock';\nexport function BlockNumbersProvider(_ref) {\n  var children = _ref.children;\n  var networks = useReadonlyNetworks();\n\n  var _useReducer = useReducer(blockNumberReducer, {}),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  useEffect(function () {\n    var onUnmount = Object.entries(networks).map(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          chainId = _ref3[0],\n          provider = _ref3[1];\n\n      return subscribeToNewBlock(provider, Number(chainId), dispatch);\n    });\n    return function () {\n      onUnmount.forEach(function (fn) {\n        return fn();\n      });\n    };\n  }, [networks]);\n  var debouncedState = useDebounce(state, 100);\n  return _jsx(BlockNumbersContext.Provider, {\n    value: debouncedState,\n    children: children\n  });\n}","map":{"version":3,"mappings":";;AAAA,SAAoBA,SAApB,EAA+BC,UAA/B,QAAiD,OAAjD;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,mBAAT,QAAoC,eAApC;AACA,SAASC,mBAAT,QAAoC,WAApC;AACA,SAASC,kBAAT,QAAmC,mBAAnC;AACA,SAASC,mBAAT,QAAoC,+BAApC;AAMA,OAAM,SAAUC,oBAAV,OAAkD;EAAA,IAAjBC,QAAiB,QAAjBA,QAAiB;EACtD,IAAMC,QAAQ,GAAGN,mBAAmB,EAApC;;EACA,kBAA0BF,UAAU,CAACI,kBAAD,EAAqB,EAArB,CAApC;EAAA;EAAA,IAAOK,KAAP;EAAA,IAAcC,QAAd;;EAEAX,SAAS,CAAC,YAAK;IACb,IAAMY,SAAS,GAAGC,MAAM,CAACC,OAAP,CAAeL,QAAf,EAAyBM,GAAzB,CAA6B;MAAA;MAAA,IAAEC,OAAF;MAAA,IAAWC,QAAX;;MAAA,OAC7CX,mBAAmB,CAACW,QAAD,EAAWC,MAAM,CAACF,OAAD,CAAjB,EAA4BL,QAA5B,CAD0B;IAAA,CAA7B,CAAlB;IAIA,OAAO,YAAK;MACVC,SAAS,CAACO,OAAV,CAAkB,UAACC,EAAD;QAAA,OAAQA,EAAE,EAAV;MAAA,CAAlB;IACD,CAFD;EAGD,CARQ,EAQN,CAACX,QAAD,CARM,CAAT;EAUA,IAAMY,cAAc,GAAGnB,WAAW,CAACQ,KAAD,EAAQ,GAAR,CAAlC;EAEA,OAAOY,KAAClB,mBAAmB,CAACmB,QAArB,EAA6B;IAACC,KAAK,EAAEH,cAAR;IAAwBb,QAAQ,EAAEA;EAAlC,CAA7B,CAAP;AACD","names":["useEffect","useReducer","useDebounce","useReadonlyNetworks","BlockNumbersContext","blockNumberReducer","subscribeToNewBlock","BlockNumbersProvider","children","networks","state","dispatch","onUnmount","Object","entries","map","chainId","provider","Number","forEach","fn","debouncedState","_jsx","Provider","value"],"sources":["/mnt/c/Users/dcmcc/Desktop/dan-mccarthy265.github.io/simple_web3_app/node_modules/@usedapp/core/src/providers/blockNumber/blockNumbers/provider.tsx"],"sourcesContent":["import { ReactNode, useEffect, useReducer } from 'react'\nimport { useDebounce } from '../../../hooks'\nimport { useReadonlyNetworks } from '../../network'\nimport { BlockNumbersContext } from './context'\nimport { blockNumberReducer } from '../common/reducer'\nimport { subscribeToNewBlock } from '../common/subscribeToNewBlock'\n\ninterface Props {\n  children: ReactNode\n}\n\nexport function BlockNumbersProvider({ children }: Props) {\n  const networks = useReadonlyNetworks()\n  const [state, dispatch] = useReducer(blockNumberReducer, {})\n\n  useEffect(() => {\n    const onUnmount = Object.entries(networks).map(([chainId, provider]) =>\n      subscribeToNewBlock(provider, Number(chainId), dispatch)\n    )\n\n    return () => {\n      onUnmount.forEach((fn) => fn())\n    }\n  }, [networks])\n\n  const debouncedState = useDebounce(state, 100)\n\n  return <BlockNumbersContext.Provider value={debouncedState} children={children} />\n}\n"]},"metadata":{},"sourceType":"module"}