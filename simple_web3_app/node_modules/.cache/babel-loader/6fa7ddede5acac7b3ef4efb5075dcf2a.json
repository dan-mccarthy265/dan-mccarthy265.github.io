{"ast":null,"code":"export function subscribeToNewBlock(provider, chainId, dispatch) {\n  if (provider && chainId !== undefined) {\n    var update = function update(blockNumber) {\n      return dispatch({\n        chainId: chainId,\n        blockNumber: blockNumber\n      });\n    };\n\n    provider.on('block', update);\n    provider.getBlockNumber().then(function (blockNumber) {\n      return update(blockNumber);\n    }, function (err) {\n      console.error(err);\n    });\n    return function () {\n      provider.off('block', update);\n    };\n  }\n\n  return function () {\n    return undefined;\n  };\n}","map":{"version":3,"mappings":"AAKA,OAAM,SAAUA,mBAAV,CACJC,QADI,EAEJC,OAFI,EAGJC,QAHI,EAGkC;EAEtC,IAAIF,QAAQ,IAAIC,OAAO,KAAKE,SAA5B,EAAuC;IACrC,IAAMC,MAAM,GAAG,SAATA,MAAS,CAACC,WAAD;MAAA,OAAyBH,QAAQ,CAAC;QAAED,OAAO,EAAPA,OAAF;QAAWI,WAAW,EAAXA;MAAX,CAAD,CAAjC;IAAA,CAAf;;IACAL,QAAQ,CAACM,EAAT,CAAY,OAAZ,EAAqBF,MAArB;IAEAJ,QAAQ,CAACO,cAAT,GAA0BC,IAA1B,CACE,UAACH,WAAD;MAAA,OAAiBD,MAAM,CAACC,WAAD,CAAvB;IAAA,CADF,EAEE,UAACI,GAAD,EAAQ;MACNC,OAAO,CAACC,KAAR,CAAcF,GAAd;IACD,CAJH;IAOA,OAAO,YAAK;MACVT,QAAQ,CAACY,GAAT,CAAa,OAAb,EAAsBR,MAAtB;IACD,CAFD;EAGD;;EAED,OAAO;IAAA,OAAMD,SAAN;EAAA,CAAP;AACD","names":["subscribeToNewBlock","provider","chainId","dispatch","undefined","update","blockNumber","on","getBlockNumber","then","err","console","error","off"],"sources":["C:\\Users\\dcmcc\\Desktop\\dan-mccarthy265.github.io\\simple_web3_app\\node_modules\\@usedapp\\core\\src\\providers\\blockNumber\\common\\subscribeToNewBlock.ts"],"sourcesContent":["import { BaseProvider } from '@ethersproject/providers'\nimport { ChainId } from '../../../constants'\nimport { Dispatch } from 'react'\nimport { BlockNumberChanged } from './reducer'\n\nexport function subscribeToNewBlock(\n  provider: BaseProvider | undefined,\n  chainId: ChainId | undefined,\n  dispatch: Dispatch<BlockNumberChanged>\n) {\n  if (provider && chainId !== undefined) {\n    const update = (blockNumber: number) => dispatch({ chainId, blockNumber })\n    provider.on('block', update)\n\n    provider.getBlockNumber().then(\n      (blockNumber) => update(blockNumber),\n      (err) => {\n        console.error(err)\n      }\n    )\n\n    return () => {\n      provider.off('block', update)\n    }\n  }\n\n  return () => undefined\n}\n"]},"metadata":{},"sourceType":"module"}